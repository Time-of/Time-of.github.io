---
categories: [공부, CS]
tags: [CS]
use_math: true
---
# 메모리 영역
프로그램이 실행되기 위해서는, 프로그램이 메모리에 로드되어 있어야 한다.  
또한 프로그램에서 사용되는 변수들을 저장할 메모리 역시 필요하다.  
OS는 프로그램 실행을 위해 다양한 메모리 공간을 제공한다. 여기서는 Windows의 메모리 영역을 알아본다.  
<br>

![image](https://github.com/Time-of/Time-of.github.io/assets/83389425/90eab6e9-19bf-4391-a1bc-fde75ba36616)  
컴퓨터의 메모리 구조는 위 그림처럼 이루어져 있다.  
Code 영역은 낮은 주소이며, Stack 영역으로 갈수록 높은 주소값을 가지게 된다.  
<br>

### Code 영역
실행할 프로그램의 코드가 저장되는 영역.  
읽기 전용 데이터로, 일단 프로그램이 로드되면 변경 불가능.  
CPU는 코드 영역에 저장된 명령어를 하나씩 가져가 실행한다.  
<br>

### Data 영역
전역 변수, 정적 변수가 저장되는 영역.  
프로그램과 생명 주기를 똑같이 하여, 프로그램 시작 시 할당, 종료 시 소멸한다.  
<br>

### BSS(Block Started by Symbol) 영역
초기화되지 않은 전역 변수, 정적 변수가 저장되는 영역.  
프로그램 시작 시 자동으로 0으로 초기화된다.  
<br>

굳이 초기화 여부로 데이터 영역과 분리할 필요가 있을까? 싶은데, 이 이유를 찾아보면:  
**프로그램의 크기를 줄여 최적화할 수 있기 때문**이라고 한다.  
값이 실제 할당되기 전까지 이 공간을 다른 용도로 활용할 수 있다.  
<br>

[c - Why is the .bss segment required? - Stack Overflow](https://stackoverflow.com/questions/9535250/why-is-the-bss-segment-required)

<br>

### Heap 영역
프로그래머가 직접 메모리를 할당하고 해제하여 관리하는 영역.  
메모리의 낮은 주소에서 높은 주소를 쓰는 방향으로 확장된다.  
프로그램 실행 중 원하는 만큼 메모리를 할당하고 해제할 수 있다.  
일반적으로 '동적 할당'하는 메모리들이 다 힙에 저장된다.  
<ins>참고로 힙 영역은 자료구조 힙과 아무런 상관이 없다. 이름만 동일할 뿐.</ins>  
생각해보면 힙은 최댓값/최솟값을 찾는 데 특화된 완전이진트리이므로 전혀 연관이 없음을 짐작할 수 있다.  
<br>

### 스택 영역
함수 호출과 관련된 정보를 저장하는 영역.  
스택은 자료구조 스택과 동일하게, 후입선출(LIFO, Last In First Out) 형식으로 데이터를 관리한다. 나중에 들어간 데이터가 먼저 나오게 된다.  
이런 특성 때문에 재귀 호출 또는 함수 내 함수 호출 등에 유용하게 사용된다.  
<br>

스택 영역의 크기를 초과하면 Stack Overflow가 발생한다. 프로그램의 정상 실행이 보장되지 않는 상황을 초래할 수 있다.  
스택의 데이터는 함수 호출 시 할당되고, 함수 소멸 시 소멸한다.  
<br>

스택은 메모리의 높은 주소에서 낮은 주소를 쓰는 방향으로 확장된다.  
스택과 힙이 서로 가까워지다가 만나게 되면 스택 오버플로우나 힙 오버플로우가 발생하게 된다.  

